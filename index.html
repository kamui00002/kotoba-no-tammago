<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã“ã¨ã°ã®ãŸã¾ã” - å®Œå…¨ç‰ˆ</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Hiragino Kaku Gothic Pro', 'ãƒ¡ã‚¤ãƒªã‚ª', sans-serif;
            background: linear-gradient(135deg, #f5f0ff 0%, #e8d4ff 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        .phone-container {
            width: 390px;
            height: 844px;
            background: white;
            border-radius: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
            position: relative;
        }
        .screen {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            display: none;
            opacity: 0;
            transition: opacity 0.3s;
        }
        .screen.active { display: block; opacity: 1; }
        .splash-screen {
            background: linear-gradient(135deg, #1a0033 0%, #4a148c 50%, #7b1fa2 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        .app-icon {
            width: 150px;
            height: 150px;
            background: white;
            border-radius: 35px;
            margin-bottom: 30px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 80px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
        }
        .app-title {
            font-size: 36px;
            font-weight: bold;
            color: white;
            margin-bottom: 10px;
        }
        .app-subtitle {
            font-size: 14px;
            color: #E8D4FF;
            text-align: center;
            padding: 0 40px;
        }
        .loading-dots { display: flex; gap: 8px; margin-top: 40px; }
        .dot {
            width: 10px;
            height: 10px;
            background: white;
            border-radius: 50%;
            animation: dotBounce 1.4s infinite ease-in-out both;
        }
        .dot:nth-child(1) { animation-delay: -0.32s; }
        .dot:nth-child(2) { animation-delay: -0.16s; }
        @keyframes dotBounce {
            0%, 80%, 100% { transform: scale(0); }
            40% { transform: scale(1); }
        }
        .quiz-header {
            height: 60px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
            background: rgba(255,255,255,0.95);
            border-bottom: 1px solid #f0f0f0;
        }
        .character-section {
            padding: 30px 20px 20px;
            background: linear-gradient(to bottom, rgba(184,164,232,0.1), transparent);
        }
        .character-container { display: flex; align-items: flex-start; gap: 15px; }
        .character-avatar {
            width: 70px;
            height: 70px;
            background: linear-gradient(135deg, #B8A4E8 0%, #9B7ED9 100%);
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 35px;
        }
        .speech-bubble {
            background: white;
            border-radius: 20px;
            padding: 15px 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            position: relative;
            max-width: 260px;
            font-size: 15px;
            color: #333;
        }
        .speech-bubble::before {
            content: '';
            position: absolute;
            left: -10px;
            top: 20px;
            border-style: solid;
            border-width: 10px 15px 10px 0;
            border-color: transparent white transparent transparent;
        }
        .question-area { padding: 20px; }
        .question-text {
            font-size: 18px;
            font-weight: bold;
            color: #333;
            margin-bottom: 20px;
            text-align: center;
        }
        .choices { display: flex; flex-direction: column; gap: 15px; }
        .choice-button {
            background: white;
            border: 2px solid #ddd;
            border-radius: 20px;
            padding: 20px;
            font-size: 16px;
            text-align: left;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            z-index: 10;
        }
        .choice-button:hover {
            background: #f5f0ff;
            border-color: #9B7ED9;
            transform: translateX(5px);
        }
        .choice-button:active {
            background: #e8d4ff;
        }
        .result-screen {
            background: linear-gradient(135deg, #1a0033 0%, #4a148c 50%, #7b1fa2 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 40px;
            text-align: center;
        }
        .result-character { font-size: 120px; margin-bottom: 20px; }
        .result-title { font-size: 28px; font-weight: bold; color: white; margin-bottom: 10px; }
        .result-subtitle { font-size: 22px; color: #E8D4FF; margin-bottom: 20px; }
        .result-description { font-size: 16px; color: white; line-height: 1.8; margin-bottom: 30px; max-width: 300px; }
        .continue-button {
            padding: 15px 40px;
            background: white;
            color: #9B7ED9;
            border: none;
            border-radius: 25px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            z-index: 100;
            position: relative;
        }
        .continue-button:hover {
            background: #f5f0ff;
            transform: scale(1.05);
        }
        .continue-button:active {
            background: #e8d4ff;
            transform: scale(0.98);
        }
        .level-select-screen {
            background-image: linear-gradient(to bottom, rgba(255,255,255,0.95) 0%, rgba(255,255,255,0.85) 60px, rgba(255,255,255,0.7) 200px, rgba(255,255,255,0.85) 500px, rgba(255,255,255,0.95) 100%), linear-gradient(135deg, #1a0033 0%, #4a148c 50%, #7b1fa2 100%);
            padding: 80px 20px 40px;
        }
        .level-title { font-size: 24px; font-weight: bold; color: #333; text-align: center; margin-bottom: 10px; }
        .level-subtitle { font-size: 16px; color: #666; text-align: center; margin-bottom: 40px; }
        .level-buttons { display: flex; flex-direction: column; gap: 20px; padding: 0 20px; }
        .level-button {
            background: white;
            border: 3px solid #9B7ED9;
            border-radius: 25px;
            padding: 30px;
            cursor: pointer;
            transition: all 0.3s;
            z-index: 100;
            position: relative;
        }
        .level-button:hover { 
            transform: translateY(-5px); 
            background: #f5f0ff;
        }
        .level-button:active {
            background: #e8d4ff;
            transform: translateY(-2px);
        }
        .level-icon { font-size: 40px; margin-bottom: 10px; }
        .level-name { font-size: 20px; font-weight: bold; color: #9B7ED9; margin-bottom: 5px; }
        .level-desc { font-size: 14px; color: #666; }
        .home-screen {
            background-image: linear-gradient(to bottom, rgba(255,255,255,0.95) 0%, rgba(255,255,255,0.85) 60px, rgba(255,255,255,0.7) 200px, rgba(255,255,255,0.85) 500px, rgba(255,255,255,0.95) 100%), linear-gradient(135deg, #1a0033 0%, #4a148c 50%, #7b1fa2 100%);
        }
        .home-header {
            height: 60px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
            background: rgba(255,255,255,0.9);
        }
        .icon { font-size: 24px; cursor: pointer; position: relative; z-index: 100; }
        .home-content { padding: 20px; text-align: center; }
        .character-name { color: #9B7ED9; font-size: 18px; font-weight: bold; margin-bottom: 5px; }
        .level { color: #FFD700; font-size: 24px; font-weight: bold; margin-bottom: 20px; }
        .character-display {
            width: 250px;
            height: 250px;
            margin: 0 auto 20px;
            background: #B8A4E8;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 80px;
            cursor: pointer;
        }
        .exp-container { margin: 20px 0; }
        .exp-bar { width: 100%; height: 20px; background: #f0f0f0; border-radius: 10px; overflow: hidden; margin-bottom: 8px; }
        .exp-progress { height: 100%; background: linear-gradient(90deg, #B8A4E8 0%, #9B7ED9 100%); transition: width 1s; }
        .exp-text { color: #666; font-size: 14px; }
        .quiz-start-button {
            width: 85%;
            margin: 20px auto;
            padding: 18px;
            background: linear-gradient(135deg, #9B7ED9 0%, #B8A4E8 100%);
            color: white;
            border: none;
            border-radius: 30px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            z-index: 100;
            position: relative;
            display: block;
        }
        .quiz-start-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(155,126,217,0.5);
        }
        .quiz-start-button:active {
            transform: translateY(0);
            box-shadow: 0 5px 15px rgba(155,126,217,0.4);
        }
        .stats { display: flex; justify-content: center; gap: 40px; margin-top: 20px; color: #888; font-size: 14px; }
        .mini-character {
            width: 90px;
            height: 90px;
            background: #B8A4E8;
            border-radius: 50%;
            display: inline-flex;
            justify-content: center;
            align-items: center;
            font-size: 45px;
            margin-bottom: 10px;
        }
        .cheer-message { font-size: 14px; color: #9B7ED9; font-weight: bold; }
        .question-card {
            background: white;
            border-radius: 20px;
            padding: 25px 20px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            text-align: center;
            margin-bottom: 20px;
        }
        .word { font-size: 25px; font-weight: bold; color: #333; margin-bottom: 8px; }
        .question-text-small { font-size: 14px; color: #666; }
        .choice-button.correct { background: #d4edda; border-color: #28a745; }
        .choice-button.wrong { background: #f8d7da; border-color: #dc3545; }
        .quiz-result-screen {
            background-image: linear-gradient(to bottom, rgba(255,255,255,0.95) 0%, rgba(255,255,255,0.85) 60px, rgba(255,255,255,0.7) 200px, rgba(255,255,255,0.85) 500px, rgba(255,255,255,0.95) 100%), linear-gradient(135deg, #1a0033 0%, #4a148c 50%, #7b1fa2 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 40px;
            text-align: center;
        }
        .result-big-character { font-size: 100px; margin-bottom: 20px; }
        .result-stats { font-size: 28px; color: #333; font-weight: bold; margin-bottom: 20px; }
        .exp-earned { font-size: 32px; color: #FFD700; font-weight: bold; margin-bottom: 30px; }
        
        .level-up-screen {
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 50%, #FF6347 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 40px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        .level-up-character {
            font-size: 150px;
            margin-bottom: 20px;
            animation: levelUpBounce 0.8s ease-in-out;
        }
        @keyframes levelUpBounce {
            0% { transform: scale(0) rotate(0deg); }
            50% { transform: scale(1.2) rotate(180deg); }
            100% { transform: scale(1) rotate(360deg); }
        }
        .level-up-title {
            font-size: 48px;
            font-weight: bold;
            color: white;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.3);
            margin-bottom: 20px;
            animation: slideDown 0.6s ease-out;
        }
        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-50px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .level-number {
            font-size: 72px;
            font-weight: bold;
            color: white;
            text-shadow: 4px 4px 8px rgba(0,0,0,0.4);
            margin-bottom: 30px;
            animation: scaleIn 0.8s ease-out 0.3s both;
        }
        @keyframes scaleIn {
            from { opacity: 0; transform: scale(0); }
            to { opacity: 1; transform: scale(1); }
        }
        .sparkle {
            position: absolute;
            width: 20px;
            height: 20px;
            background: white;
            border-radius: 50%;
            animation: sparkleFloat 2s ease-in-out infinite;
            box-shadow: 0 0 10px white;
        }
        @keyframes sparkleFloat {
            0%, 100% { transform: translateY(0) scale(1); opacity: 1; }
            50% { transform: translateY(-30px) scale(1.5); opacity: 0.5; }
        }
        .sparkle:nth-child(1) { top: 20%; left: 10%; animation-delay: 0s; }
        .sparkle:nth-child(2) { top: 30%; left: 80%; animation-delay: 0.3s; }
        .sparkle:nth-child(3) { top: 60%; left: 15%; animation-delay: 0.6s; }
        .sparkle:nth-child(4) { top: 70%; left: 85%; animation-delay: 0.9s; }
        .sparkle:nth-child(5) { top: 40%; left: 50%; animation-delay: 1.2s; }
        .level-up-message {
            font-size: 20px;
            color: white;
            margin-bottom: 30px;
            animation: fadeIn 1s ease-out 0.6s both;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .settings-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            padding: 20px;
        }
        .settings-modal.active { display: flex; }
        .settings-content {
            background: linear-gradient(135deg, #1a0033 0%, #4a148c 50%, #7b1fa2 100%);
            border-radius: 30px;
            width: 100%;
            max-width: 350px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0,0,0,0.5);
        }
        .settings-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 25px;
            border-bottom: 1px solid rgba(255,255,255,0.2);
        }
        .settings-title {
            font-size: 24px;
            font-weight: bold;
            color: white;
        }
        .settings-close {
            font-size: 28px;
            color: white;
            cursor: pointer;
            background: none;
            border: none;
            opacity: 0.8;
            transition: opacity 0.3s;
        }
        .settings-close:hover { opacity: 1; }
        .settings-body { padding: 20px; }
        .settings-section {
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 15px;
        }
        .settings-section-title {
            font-size: 16px;
            font-weight: bold;
            color: #E8D4FF;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .settings-item {
            background: rgba(0,0,0,0.2);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 10px;
        }
        .settings-item:last-child { margin-bottom: 0; }
        .settings-label {
            font-size: 14px;
            color: #B8A4E8;
            margin-bottom: 5px;
        }
        .settings-value {
            font-size: 16px;
            color: white;
            font-weight: 600;
        }
        .settings-button {
            background: linear-gradient(135deg, #9B7ED9 0%, #B8A4E8 100%);
            color: white;
            border: none;
            border-radius: 10px;
            padding: 12px 20px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 10px;
            width: 100%;
        }
        .settings-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(155,126,217,0.5);
        }
        .settings-button.danger {
            background: linear-gradient(135deg, #dc2626 0%, #ef4444 100%);
        }
        .settings-button.danger:hover {
            box-shadow: 0 5px 15px rgba(220,38,38,0.5);
        }
        .settings-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .debug-buttons {
            display: flex;
            gap: 10px;
        }
        .debug-buttons .settings-button {
            width: auto;
            flex: 1;
        }
        
        .stats-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            padding: 20px;
            overflow-y: auto;
        }
        .stats-modal.active { display: flex; }
        .stats-content {
            background: linear-gradient(135deg, #1e3a8a 0%, #4c1d95 100%);
            border-radius: 30px;
            width: 100%;
            max-width: 350px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0,0,0,0.5);
        }
        .stats-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 25px;
            border-bottom: 1px solid rgba(255,255,255,0.2);
        }
        .stats-title {
            font-size: 24px;
            font-weight: bold;
            color: white;
        }
        .stats-close {
            font-size: 28px;
            color: white;
            cursor: pointer;
            background: none;
            border: none;
            opacity: 0.8;
            transition: opacity 0.3s;
        }
        .stats-close:hover { opacity: 1; }
        .stats-body { padding: 20px; }
        .stats-card {
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 15px;
        }
        .stats-card-title {
            font-size: 16px;
            font-weight: bold;
            color: #93c5fd;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .stat-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        .stat-row:last-child { border-bottom: none; }
        .stat-label {
            font-size: 14px;
            color: #cbd5e1;
        }
        .stat-value {
            font-size: 18px;
            font-weight: bold;
            color: white;
        }
        .progress-bar-container {
            margin: 10px 0;
        }
        .progress-label {
            font-size: 12px;
            color: #cbd5e1;
            margin-bottom: 5px;
            display: flex;
            justify-content: space-between;
        }
        .progress-bar-stats {
            width: 100%;
            height: 8px;
            background: rgba(0,0,0,0.3);
            border-radius: 10px;
            overflow: hidden;
        }
        .progress-fill-stats {
            height: 100%;
            border-radius: 10px;
            transition: width 0.5s;
        }
        .progress-beginner { background: linear-gradient(90deg, #22c55e, #16a34a); }
        .progress-intermediate { background: linear-gradient(90deg, #eab308, #ca8a04); }
        .progress-advanced { background: linear-gradient(90deg, #ef4444, #dc2626); }
        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
            margin-top: 10px;
        }
        .calendar-day {
            aspect-ratio: 1;
            background: rgba(0,0,0,0.3);
            border-radius: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            color: #94a3b8;
        }
        .calendar-day.studied {
            background: linear-gradient(135deg, #22c55e, #16a34a);
            color: white;
            font-weight: bold;
        }
        .calendar-day.today {
            border: 2px solid #60a5fa;
        }
        .word-list {
            max-height: 150px;
            overflow-y: auto;
        }
        .word-item {
            background: rgba(0,0,0,0.2);
            padding: 8px 12px;
            border-radius: 8px;
            margin-bottom: 5px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .word-name {
            font-size: 14px;
            color: white;
        }
        .word-accuracy {
            font-size: 12px;
            font-weight: bold;
        }
        .word-accuracy.good { color: #22c55e; }
        .word-accuracy.bad { color: #ef4444; }
        .big-stat {
            text-align: center;
            padding: 20px;
        }
        .big-stat-number {
            font-size: 48px;
            font-weight: bold;
            color: #fbbf24;
            margin-bottom: 5px;
        }
        .big-stat-label {
            font-size: 14px;
            color: #cbd5e1;
        }
    </style>
</head>
<body>
    <div class="phone-container">
        <!-- ã‚¹ãƒ—ãƒ©ãƒƒã‚·ãƒ¥ç”»é¢ -->
        <div class="screen splash-screen active" id="splashScreen">
            <div class="app-icon">ğŸ¥š</div>
            <div class="app-title">ã“ã¨ã°ã®ãŸã¾ã”</div>
            <div class="app-subtitle">ï½è‚²ã¦ã¦å­¦ã¶ã€ã‚ãªãŸã ã‘ã®è‹±å˜èªï½</div>
            <div class="loading-dots">
                <div class="dot"></div>
                <div class="dot"></div>
                <div class="dot"></div>
            </div>
        </div>

        <!-- MBTIè¨ºæ–­ç”»é¢ -->
        <div class="screen" id="mbtiScreen">
            <div class="quiz-header">
                <div style="font-size: 18px; font-weight: bold; color: #9B7ED9;">å•é¡Œ <span id="mbtiCurrentQ">1</span>/16</div>
            </div>
            <div class="character-section">
                <div class="character-container">
                    <div class="character-avatar" id="mbtiCharAvatar">ğŸŒ™</div>
                    <div class="speech-bubble" id="mbtiBubble"></div>
                </div>
            </div>
            <div class="question-area">
                <div class="question-text" id="mbtiQuestion"></div>
                <div class="choices" id="mbtiChoices"></div>
            </div>
        </div>

        <!-- è¨ºæ–­çµæœç”»é¢ -->
        <div class="screen result-screen" id="resultScreen">
            <div class="result-character" id="resultChar">ğŸŒ™</div>
            <div class="result-title" id="resultType">INFP</div>
            <div class="result-subtitle" id="resultName">å¤¢è¦‹ã‚‹é­”æ³•ä½¿ã„</div>
            <div class="result-description" id="resultDesc"></div>
            <button class="continue-button" id="continueBtn">æ¬¡ã¸ â†’</button>
        </div>

        <!-- ãƒ¬ãƒ™ãƒ«ã‚¢ãƒƒãƒ—ç”»é¢ -->
        <div class="screen level-up-screen" id="levelUpScreen">
            <div class="sparkle"></div>
            <div class="sparkle"></div>
            <div class="sparkle"></div>
            <div class="sparkle"></div>
            <div class="sparkle"></div>
            <div class="level-up-character" id="levelUpChar">ğŸŒŸ</div>
            <div class="level-up-title">LEVEL UP!</div>
            <div class="level-number">Lv.<span id="newLevelNumber">2</span></div>
            <div class="level-up-message" id="levelUpMessage">ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ï¼</div>
            <button class="continue-button" id="levelUpContinueBtn">ç¶šã‘ã‚‹ â†’</button>
        </div>

        <!-- ãƒ¬ãƒ™ãƒ«é¸æŠç”»é¢ -->
        <div class="screen level-select-screen" id="levelSelectScreen">
            <div class="level-title">è‹±èªãƒ¬ãƒ™ãƒ«ã‚’é¸æŠ</div>
            <div class="level-subtitle">ã©ã®ãƒ¬ãƒ™ãƒ«ã§å­¦ç¿’ã—ã¾ã™ã‹?</div>
            <div class="level-buttons">
                <div class="level-button" id="levelBeginner">
                    <div class="level-icon">ğŸŒ±</div>
                    <div class="level-name">åˆç´š</div>
                    <div class="level-desc">ä¸­å­¦è‹±èªãƒ»æ—¥å¸¸è‹±å˜èª</div>
                </div>
                <div class="level-button" id="levelIntermediate">
                    <div class="level-icon">ğŸ“š</div>
                    <div class="level-name">ä¸­ç´š</div>
                    <div class="level-desc">TOEICé »å‡ºå˜èª</div>
                </div>
                <div class="level-button" id="levelAdvanced">
                    <div class="level-icon">ğŸ“</div>
                    <div class="level-name">ä¸Šç´š</div>
                    <div class="level-desc">é›£é–¢è‹±å˜èª</div>
                </div>
            </div>
        </div>

        <!-- ãƒ›ãƒ¼ãƒ ç”»é¢ -->
        <div class="screen home-screen" id="homeScreen">
            <div class="home-header">
                <div class="icon" id="settingsBtn" onclick="openSettings()" style="cursor: pointer; z-index: 100;">âš™ï¸</div>
                <div class="icon">ğŸ </div>
                <div class="icon" id="statsBtn" onclick="openStats()" style="cursor: pointer; z-index: 100;">ğŸ“Š</div>
            </div>
            <div class="home-content">
                <div class="character-name" id="homeCharName">INFP - å¤¢è¦‹ã‚‹é­”æ³•ä½¿ã„</div>
                <div class="level" id="homeLevel">Lv.1</div>
                <div class="character-display" id="homeCharacter">ğŸŒ™</div>
                <div class="exp-container">
                    <div class="exp-bar">
                        <div class="exp-progress" id="homeExpBar" style="width: 0%"></div>
                    </div>
                    <div class="exp-text">â­ <span id="homeExp">0</span> / <span id="homeMaxExp">100</span> EXP</div>
                </div>
                <button class="quiz-start-button" id="quizStartBtn">
                    ğŸ“ è‹±èªã‚¯ã‚¤ã‚ºé–‹å§‹
                    <div style="font-size: 12px; margin-top: 5px; opacity: 0.9;">ä»Šæ—¥ <span id="todayCount">0</span>/10å›</div>
                </button>
                <div class="stats">
                    <div>ğŸ”¥ <span id="consecutiveDays">1</span>æ—¥ç›®</div>
                    <div>ğŸ“š å˜èª<span id="totalWords">0</span>å€‹</div>
                </div>
            </div>
        </div>

        <!-- ã‚¯ã‚¤ã‚ºç”»é¢ -->
        <div class="screen" id="quizScreen" style="background-image: linear-gradient(to bottom, rgba(255,255,255,0.95) 0%, rgba(255,255,255,0.85) 60px, rgba(255,255,255,0.7) 200px, rgba(255,255,255,0.85) 400px, rgba(255,255,255,0.95) 100%), linear-gradient(135deg, #1a0033 0%, #4a148c 50%, #7b1fa2 100%);">
            <div class="quiz-header">
                <div style="font-size: 18px; font-weight: bold; color: #333;">å•é¡Œ <span id="quizNum">1</span>/10</div>
            </div>
            <div style="padding: 25px 20px 20px; text-align: center;">
                <div class="mini-character" id="quizChar">ğŸŒ™</div>
                <div class="cheer-message" id="cheerMsg">é ‘å¼µã£ã¦!</div>
            </div>
            <div style="padding: 20px;">
                <div class="question-card">
                    <div class="word" id="quizWord">apple</div>
                    <div class="question-text-small">ã®æ„å‘³ã¯?</div>
                </div>
            </div>
            <div class="choices" style="padding: 0 20px;" id="quizChoices"></div>
        </div>

        <!-- ã‚¯ã‚¤ã‚ºçµæœç”»é¢ -->
        <div class="screen quiz-result-screen" id="quizResultScreen">
            <div class="result-big-character" id="quizResultChar">ğŸŒ™ğŸ˜Š</div>
            <div style="font-size: 32px; font-weight: bold; color: #9B7ED9; margin-bottom: 20px;">ã‚¯ã‚¤ã‚ºå®Œäº†!</div>
            <div class="result-stats">æ­£è§£: <span id="finalScore">0</span>/10</div>
            <div class="exp-earned">+<span id="finalExpEarned">0</span> EXP</div>
            <button class="continue-button" id="backHomeBtn">ãƒ›ãƒ¼ãƒ ã¸æˆ»ã‚‹</button>
        </div>

        <!-- è¨­å®šãƒ¢ãƒ¼ãƒ€ãƒ« -->
        <div class="settings-modal" id="settingsModal">
            <div class="settings-content">
                <div class="settings-header">
                    <div class="settings-title">âš™ï¸ è¨­å®š</div>
                    <button class="settings-close" id="closeSettings">Ã—</button>
                </div>
                <div class="settings-body">
                    <div class="settings-section">
                        <div class="settings-section-title">ğŸ‘¤ ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ</div>
                        <div class="settings-item">
                            <div class="settings-label">MBTIã‚¿ã‚¤ãƒ—</div>
                            <div class="settings-value" id="settingsMBTI">INFP - å¤¢è¦‹ã‚‹é­”æ³•ä½¿ã„</div>
                            <button class="settings-button" id="retakeMBTI">MBTIå†è¨ºæ–­</button>
                        </div>
                        <div class="settings-item">
                            <div class="settings-label">å­¦ç¿’ãƒ¬ãƒ™ãƒ«</div>
                            <div class="settings-value" id="settingsLevel">åˆç´š</div>
                            <button class="settings-button" id="changeLevel">ãƒ¬ãƒ™ãƒ«å¤‰æ›´</button>
                        </div>
                    </div>

                    <div class="settings-section">
                        <div class="settings-section-title">ğŸ“Š ãƒ‡ãƒ¼ã‚¿</div>
                        <div class="settings-item">
                            <div class="settings-row">
                                <div>
                                    <div class="settings-label">ç¾åœ¨ã®ãƒ¬ãƒ™ãƒ«</div>
                                    <div class="settings-value" id="settingsCurrentLevel">Lv.1</div>
                                </div>
                                <div style="text-align: right;">
                                    <div class="settings-label">çµŒé¨“å€¤</div>
                                    <div class="settings-value" id="settingsExp">0 / 100</div>
                                </div>
                            </div>
                        </div>
                        <div class="settings-item">
                            <div class="settings-label">ç´¯è¨ˆå­¦ç¿’å˜èª</div>
                            <div class="settings-value" id="settingsTotalWords">0å€‹</div>
                        </div>
                        <div class="settings-item">
                            <div class="settings-label">é€£ç¶šå­¦ç¿’æ—¥æ•°</div>
                            <div class="settings-value" id="settingsStreak">ğŸ”¥ 1æ—¥</div>
                        </div>
                        <div class="settings-item">
                            <button class="settings-button danger" id="resetData">ãƒ‡ãƒ¼ã‚¿ã‚’ãƒªã‚»ãƒƒãƒˆ</button>
                        </div>
                    </div>

                    <div class="settings-section">
                        <div class="settings-section-title">ğŸ”§ ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰</div>
                        <div class="settings-item">
                            <div class="settings-label">ãƒ†ã‚¹ãƒˆç”¨æ©Ÿèƒ½</div>
                            <div class="debug-buttons">
                                <button class="settings-button" id="addExp100">+100 EXP</button>
                                <button class="settings-button" id="addLevel1">+1 Level</button>
                            </div>
                        </div>
                    </div>

                    <div class="settings-section">
                        <div class="settings-section-title">â„¹ï¸ ã‚¢ãƒ—ãƒªæƒ…å ±</div>
                        <div class="settings-item">
                            <div class="settings-row">
                                <div class="settings-label">ãƒãƒ¼ã‚¸ãƒ§ãƒ³</div>
                                <div class="settings-value">v2.0.0</div>
                            </div>
                        </div>
                        <div class="settings-item">
                            <div class="settings-row">
                                <div class="settings-label">ä½œæˆè€…</div>
                                <div class="settings-value">kamui00002</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- çµ±è¨ˆãƒ¢ãƒ¼ãƒ€ãƒ« -->
        <div class="stats-modal" id="statsModal">
            <div class="stats-content">
                <div class="stats-header">
                    <div class="stats-title">ğŸ“Š å­¦ç¿’çµ±è¨ˆ</div>
                    <button class="stats-close" id="closeStats">Ã—</button>
                </div>
                <div class="stats-body">
                    <div class="stats-card">
                        <div class="stats-card-title">ğŸ¯ ç·åˆæˆç¸¾</div>
                        <div class="stat-row">
                            <span class="stat-label">ç·ã‚¯ã‚¤ã‚ºæ•°</span>
                            <span class="stat-value" id="statTotalQuizzes">0å›</span>
                        </div>
                        <div class="stat-row">
                            <span class="stat-label">ç·æ­£è§£æ•°</span>
                            <span class="stat-value" id="statTotalCorrect">0å•</span>
                        </div>
                        <div class="stat-row">
                            <span class="stat-label">å¹³å‡æ­£ç­”ç‡</span>
                            <span class="stat-value" id="statAccuracy">0%</span>
                        </div>
                        <div class="stat-row">
                            <span class="stat-label">å­¦ç¿’ã—ãŸå˜èª</span>
                            <span class="stat-value" id="statTotalWords">0å€‹</span>
                        </div>
                    </div>

                    <div class="stats-card">
                        <div class="stats-card-title">ğŸ“š ãƒ¬ãƒ™ãƒ«åˆ¥é€²æ—</div>
                        <div class="progress-bar-container">
                            <div class="progress-label">
                                <span>ğŸŒ± åˆç´š</span>
                                <span id="progressBeginnerText">0/30</span>
                            </div>
                            <div class="progress-bar-stats">
                                <div class="progress-fill-stats progress-beginner" id="progressBeginner" style="width: 0%"></div>
                            </div>
                        </div>
                        <div class="progress-bar-container">
                            <div class="progress-label">
                                <span>ğŸ“š ä¸­ç´š</span>
                                <span id="progressIntermediateText">0/30</span>
                            </div>
                            <div class="progress-bar-stats">
                                <div class="progress-fill-stats progress-intermediate" id="progressIntermediate" style="width: 0%"></div>
                            </div>
                        </div>
                        <div class="progress-bar-container">
                            <div class="progress-label">
                                <span>ğŸ“ ä¸Šç´š</span>
                                <span id="progressAdvancedText">0/30</span>
                            </div>
                            <div class="progress-bar-stats">
                                <div class="progress-fill-stats progress-advanced" id="progressAdvanced" style="width: 0%"></div>
                            </div>
                        </div>
                    </div>

                    <div class="stats-card">
                        <div class="stats-card-title">ğŸ”¥ é€£ç¶šå­¦ç¿’ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼</div>
                        <div class="big-stat">
                            <div class="big-stat-number" id="streakDays">0</div>
                            <div class="big-stat-label">æ—¥é€£ç¶šå­¦ç¿’ä¸­ï¼</div>
                        </div>
                        <div class="calendar-grid" id="calendarGrid"></div>
                    </div>

                    <div class="stats-card">
                        <div class="stats-card-title">â° ç´¯è¨ˆå­¦ç¿’æ™‚é–“</div>
                        <div class="big-stat">
                            <div class="big-stat-number" id="studyTimeDisplay">0</div>
                            <div class="big-stat-label">åˆ†</div>
                        </div>
                    </div>

                    <div class="stats-card">
                        <div class="stats-card-title">ğŸ“– å˜èªåˆ†æ</div>
                        <div style="margin-bottom: 15px;">
                            <div style="font-size: 14px; color: #cbd5e1; margin-bottom: 8px;">å¾—æ„ãªå˜èª TOP 3</div>
                            <div class="word-list" id="goodWords"></div>
                        </div>
                        <div>
                            <div style="font-size: 14px; color: #cbd5e1; margin-bottom: 8px;">è‹¦æ‰‹ãªå˜èª TOP 3</div>
                            <div class="word-list" id="badWords"></div>
                        </div>
                    </div>

                    <div class="stats-card">
                        <div class="stats-card-title">â„¹ï¸ ã‚¢ãƒ—ãƒªæƒ…å ±</div>
                        <div class="stat-row">
                            <span class="stat-label">ãƒãƒ¼ã‚¸ãƒ§ãƒ³</span>
                            <span class="stat-value">v2.0.0</span>
                        </div>
                        <div class="stat-row">
                            <span class="stat-label">ä½œæˆè€…</span>
                            <span class="stat-value">kamui00002</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/lottie-web/5.12.2/lottie.min.js"></script>
    <script>
        const wordsData={"åˆç´š":[{"id":1,"word":"apple","meaning":"ã‚Šã‚“ã”","wrongChoices":["ãƒãƒŠãƒŠ","ã‚ªãƒ¬ãƒ³ã‚¸","ã¶ã©ã†"]},{"id":2,"word":"book","meaning":"æœ¬","wrongChoices":["ãƒšãƒ³","æœº","æ¤…å­"]},{"id":3,"word":"cat","meaning":"çŒ«","wrongChoices":["çŠ¬","é³¥","é­š"]},{"id":4,"word":"dog","meaning":"çŠ¬","wrongChoices":["çŒ«","é¦¬","ç‰›"]},{"id":5,"word":"egg","meaning":"åµ","wrongChoices":["ãƒ‘ãƒ³","ç±³","è‚‰"]},{"id":6,"word":"fish","meaning":"é­š","wrongChoices":["è‚‰","é‡èœ","æœç‰©"]},{"id":7,"word":"house","meaning":"å®¶","wrongChoices":["å­¦æ ¡","ç—…é™¢","åº—"]},{"id":8,"word":"pen","meaning":"ãƒšãƒ³","wrongChoices":["é‰›ç­†","æ¶ˆã—ã‚´ãƒ ","ãƒãƒ¼ãƒˆ"]},{"id":9,"word":"desk","meaning":"æœº","wrongChoices":["æ¤…å­","æ£š","ãƒ™ãƒƒãƒ‰"]},{"id":10,"word":"chair","meaning":"æ¤…å­","wrongChoices":["æœº","ã‚½ãƒ•ã‚¡","ãƒ™ãƒ³ãƒ"]},{"id":11,"word":"eat","meaning":"é£Ÿã¹ã‚‹","wrongChoices":["é£²ã‚€","è¦‹ã‚‹","èã"]},{"id":12,"word":"drink","meaning":"é£²ã‚€","wrongChoices":["é£Ÿã¹ã‚‹","æ­©ã","èµ°ã‚‹"]},{"id":13,"word":"run","meaning":"èµ°ã‚‹","wrongChoices":["æ­©ã","æ³³ã","é£›ã¶"]},{"id":14,"word":"walk","meaning":"æ­©ã","wrongChoices":["èµ°ã‚‹","æ­¢ã¾ã‚‹","åº§ã‚‹"]},{"id":15,"word":"sleep","meaning":"çœ ã‚‹","wrongChoices":["èµ·ãã‚‹","é£Ÿã¹ã‚‹","éŠã¶"]},{"id":16,"word":"read","meaning":"èª­ã‚€","wrongChoices":["æ›¸ã","è©±ã™","èã"]},{"id":17,"word":"write","meaning":"æ›¸ã","wrongChoices":["èª­ã‚€","æ¶ˆã™","æã"]},{"id":18,"word":"speak","meaning":"è©±ã™","wrongChoices":["èã","è¦‹ã‚‹","æ›¸ã"]},{"id":19,"word":"listen","meaning":"èã","wrongChoices":["è©±ã™","è¦‹ã‚‹","èª­ã‚€"]},{"id":20,"word":"watch","meaning":"è¦‹ã‚‹","wrongChoices":["èã","èª­ã‚€","æ›¸ã"]},{"id":21,"word":"big","meaning":"å¤§ãã„","wrongChoices":["å°ã•ã„","é«˜ã„","ä½ã„"]},{"id":22,"word":"small","meaning":"å°ã•ã„","wrongChoices":["å¤§ãã„","é•·ã„","çŸ­ã„"]},{"id":23,"word":"good","meaning":"è‰¯ã„","wrongChoices":["æ‚ªã„","æ™®é€š","æœ€é«˜"]},{"id":24,"word":"bad","meaning":"æ‚ªã„","wrongChoices":["è‰¯ã„","æ™®é€š","æœ€æ‚ª"]},{"id":25,"word":"hot","meaning":"ç†±ã„","wrongChoices":["å†·ãŸã„","æ¸©ã‹ã„","æ¶¼ã—ã„"]},{"id":26,"word":"cold","meaning":"å†·ãŸã„","wrongChoices":["ç†±ã„","æ¸©ã‹ã„","æš‘ã„"]},{"id":27,"word":"happy","meaning":"å¬‰ã—ã„","wrongChoices":["æ‚²ã—ã„","æ€’ã£ã¦ã„ã‚‹","çœ ã„"]},{"id":28,"word":"sad","meaning":"æ‚²ã—ã„","wrongChoices":["å¬‰ã—ã„","æ¥½ã—ã„","æ€’ã£ã¦ã„ã‚‹"]},{"id":29,"word":"beautiful","meaning":"ç¾ã—ã„","wrongChoices":["æ±šã„","é†œã„","æ™®é€š"]},{"id":30,"word":"water","meaning":"æ°´","wrongChoices":["ãŠèŒ¶","ã‚¸ãƒ¥ãƒ¼ã‚¹","ç‰›ä¹³"]}],"ä¸­ç´š":[{"id":31,"word":"achieve","meaning":"é”æˆã™ã‚‹","wrongChoices":["å¤±æ•—ã™ã‚‹","æ”¾æ£„ã™ã‚‹","ç„¡è¦–ã™ã‚‹"]},{"id":32,"word":"analyze","meaning":"åˆ†æã™ã‚‹","wrongChoices":["ç„¡è¦–ã™ã‚‹","ç ´å£Šã™ã‚‹","ä½œæˆã™ã‚‹"]},{"id":33,"word":"approach","meaning":"è¿‘ã¥ã","wrongChoices":["é›¢ã‚Œã‚‹","é€ƒã’ã‚‹","éš ã‚Œã‚‹"]},{"id":34,"word":"benefit","meaning":"åˆ©ç›Š","wrongChoices":["æå¤±","è²»ç”¨","è² å‚µ"]},{"id":35,"word":"challenge","meaning":"æŒ‘æˆ¦","wrongChoices":["æ”¾æ£„","é€ƒé¿","æ‹’å¦"]},{"id":36,"word":"compare","meaning":"æ¯”è¼ƒã™ã‚‹","wrongChoices":["æ··åŒã™ã‚‹","åˆ†é›¢ã™ã‚‹","ç„¡è¦–ã™ã‚‹"]},{"id":37,"word":"complete","meaning":"å®Œäº†ã™ã‚‹","wrongChoices":["é–‹å§‹ã™ã‚‹","ä¸­æ–­ã™ã‚‹","æ”¾æ£„ã™ã‚‹"]},{"id":38,"word":"consider","meaning":"è€ƒæ…®ã™ã‚‹","wrongChoices":["ç„¡è¦–ã™ã‚‹","æ‹’å¦ã™ã‚‹","å¿˜ã‚Œã‚‹"]},{"id":39,"word":"create","meaning":"å‰µé€ ã™ã‚‹","wrongChoices":["ç ´å£Šã™ã‚‹","æ¨¡å€£ã™ã‚‹","æ”¾æ£„ã™ã‚‹"]},{"id":40,"word":"decide","meaning":"æ±ºå®šã™ã‚‹","wrongChoices":["è¿·ã†","å»¶æœŸã™ã‚‹","æ‹’å¦ã™ã‚‹"]},{"id":41,"word":"develop","meaning":"ç™ºå±•ã•ã›ã‚‹","wrongChoices":["é€€åŒ–ã™ã‚‹","åœæ­¢ã™ã‚‹","ç ´å£Šã™ã‚‹"]},{"id":42,"word":"discover","meaning":"ç™ºè¦‹ã™ã‚‹","wrongChoices":["éš ã™","å¤±ã†","ç„¡è¦–ã™ã‚‹"]},{"id":43,"word":"discuss","meaning":"è­°è«–ã™ã‚‹","wrongChoices":["ç„¡è¦–ã™ã‚‹","éš ã™","æ”¾æ£„ã™ã‚‹"]},{"id":44,"word":"establish","meaning":"ç¢ºç«‹ã™ã‚‹","wrongChoices":["ç ´å£Šã™ã‚‹","æ”¾æ£„ã™ã‚‹","ç–‘ã†"]},{"id":45,"word":"experience","meaning":"çµŒé¨“","wrongChoices":["ç†è«–","æƒ³åƒ","ç„¡çŸ¥"]},{"id":46,"word":"explain","meaning":"èª¬æ˜ã™ã‚‹","wrongChoices":["éš ã™","æ··ä¹±ã•ã›ã‚‹","ç„¡è¦–ã™ã‚‹"]},{"id":47,"word":"express","meaning":"è¡¨ç¾ã™ã‚‹","wrongChoices":["éš ã™","æŠ‘ãˆã‚‹","å¿˜ã‚Œã‚‹"]},{"id":48,"word":"improve","meaning":"æ”¹å–„ã™ã‚‹","wrongChoices":["æ‚ªåŒ–ã•ã›ã‚‹","ç¶­æŒã™ã‚‹","ç ´å£Šã™ã‚‹"]},{"id":49,"word":"include","meaning":"å«ã‚€","wrongChoices":["é™¤å¤–ã™ã‚‹","åˆ†é›¢ã™ã‚‹","æ‹’å¦ã™ã‚‹"]},{"id":50,"word":"increase","meaning":"å¢—åŠ ã™ã‚‹","wrongChoices":["æ¸›å°‘ã™ã‚‹","ç¶­æŒã™ã‚‹","æ¶ˆæ»…ã™ã‚‹"]},{"id":51,"word":"important","meaning":"é‡è¦ãª","wrongChoices":["äº›ç´°ãª","ç„¡é–¢ä¿‚ãª","ä¸è¦ãª"]},{"id":52,"word":"possible","meaning":"å¯èƒ½ãª","wrongChoices":["ä¸å¯èƒ½ãª","å›°é›£ãª","ç¦æ­¢ã•ã‚ŒãŸ"]},{"id":53,"word":"necessary","meaning":"å¿…è¦ãª","wrongChoices":["ä¸è¦ãª","ä»»æ„ã®","ç¦æ­¢ã•ã‚ŒãŸ"]},{"id":54,"word":"different","meaning":"ç•°ãªã‚‹","wrongChoices":["åŒã˜","ä¼¼ã¦ã„ã‚‹","åŒä¸€ã®"]},{"id":55,"word":"similar","meaning":"ä¼¼ã¦ã„ã‚‹","wrongChoices":["ç•°ãªã‚‹","åå¯¾ã®","ç„¡é–¢ä¿‚ãª"]},{"id":56,"word":"various","meaning":"æ§˜ã€…ãª","wrongChoices":["å˜ä¸€ã®","åŒã˜","é™å®šçš„ãª"]},{"id":57,"word":"available","meaning":"åˆ©ç”¨å¯èƒ½ãª","wrongChoices":["åˆ©ç”¨ä¸å¯ã®","ç¦æ­¢ã•ã‚ŒãŸ","åˆ¶é™ã•ã‚ŒãŸ"]},{"id":58,"word":"effective","meaning":"åŠ¹æœçš„ãª","wrongChoices":["ç„¡åŠ¹ãª","æœ‰å®³ãª","ä¸é©åˆ‡ãª"]},{"id":59,"word":"significant","meaning":"é‡è¦ãª","wrongChoices":["äº›ç´°ãª","ç„¡æ„å‘³ãª","ä¸è¦ãª"]},{"id":60,"word":"appropriate","meaning":"é©åˆ‡ãª","wrongChoices":["ä¸é©åˆ‡ãª","ä¸æ­£ãª","ç„¡é–¢ä¿‚ãª"]}],"ä¸Šç´š":[{"id":61,"word":"accommodate","meaning":"åå®¹ã™ã‚‹","wrongChoices":["æ‹’å¦ã™ã‚‹","è¿½æ”¾ã™ã‚‹","åˆ¶é™ã™ã‚‹"]},{"id":62,"word":"anticipate","meaning":"äºˆæƒ³ã™ã‚‹","wrongChoices":["ç„¡è¦–ã™ã‚‹","é©šã","å¿˜ã‚Œã‚‹"]},{"id":63,"word":"comprehensive","meaning":"åŒ…æ‹¬çš„ãª","wrongChoices":["éƒ¨åˆ†çš„ãª","é™å®šçš„ãª","ä¸å®Œå…¨ãª"]},{"id":64,"word":"consecutive","meaning":"é€£ç¶šã—ãŸ","wrongChoices":["æ–­ç¶šçš„ãª","ãƒ©ãƒ³ãƒ€ãƒ ãª","å˜ç‹¬ã®"]},{"id":65,"word":"constitute","meaning":"æ§‹æˆã™ã‚‹","wrongChoices":["ç ´å£Šã™ã‚‹","åˆ†è§£ã™ã‚‹","é™¤å¤–ã™ã‚‹"]},{"id":66,"word":"demonstrate","meaning":"å®Ÿè¨¼ã™ã‚‹","wrongChoices":["éš ã™","å¦å®šã™ã‚‹","ç–‘ã†"]},{"id":67,"word":"deteriorate","meaning":"æ‚ªåŒ–ã™ã‚‹","wrongChoices":["æ”¹å–„ã™ã‚‹","ç¶­æŒã™ã‚‹","å¼·åŒ–ã™ã‚‹"]},{"id":68,"word":"elaborate","meaning":"è©³ã—ãè¿°ã¹ã‚‹","wrongChoices":["è¦ç´„ã™ã‚‹","çœç•¥ã™ã‚‹","éš ã™"]},{"id":69,"word":"eliminate","meaning":"æ’é™¤ã™ã‚‹","wrongChoices":["å«ã‚ã‚‹","è¿½åŠ ã™ã‚‹","ç¶­æŒã™ã‚‹"]},{"id":70,"word":"facilitate","meaning":"ä¿ƒé€²ã™ã‚‹","wrongChoices":["å¦¨ã’ã‚‹","é…ã‚‰ã›ã‚‹","ç¦æ­¢ã™ã‚‹"]},{"id":71,"word":"implementation","meaning":"å®Ÿæ–½","wrongChoices":["è¨ˆç”»","ç†è«–","æ”¾æ£„"]},{"id":72,"word":"incorporate","meaning":"çµ„ã¿è¾¼ã‚€","wrongChoices":["é™¤å¤–ã™ã‚‹","åˆ†é›¢ã™ã‚‹","æ‹’å¦ã™ã‚‹"]},{"id":73,"word":"infrastructure","meaning":"ã‚¤ãƒ³ãƒ•ãƒ©","wrongChoices":["è¡¨å±¤","è£…é£¾","ä»˜å±å“"]},{"id":74,"word":"initiative","meaning":"ä¸»å°æ¨©","wrongChoices":["å¾“å±","å—å‹•","æ”¾æ£„"]},{"id":75,"word":"maintain","meaning":"ç¶­æŒã™ã‚‹","wrongChoices":["æ”¾æ£„ã™ã‚‹","ç ´å£Šã™ã‚‹","å¤‰æ›´ã™ã‚‹"]},{"id":76,"word":"maximize","meaning":"æœ€å¤§åŒ–ã™ã‚‹","wrongChoices":["æœ€å°åŒ–ã™ã‚‹","æ¸›å°‘ã•ã›ã‚‹","åˆ¶é™ã™ã‚‹"]},{"id":77,"word":"methodology","meaning":"æ–¹æ³•è«–","wrongChoices":["çµæœ","ç›®çš„","éšœå®³"]},{"id":78,"word":"mitigate","meaning":"ç·©å’Œã™ã‚‹","wrongChoices":["æ‚ªåŒ–ã•ã›ã‚‹","å¢—å¼·ã™ã‚‹","ç„¡è¦–ã™ã‚‹"]},{"id":79,"word":"nevertheless","meaning":"ãã‚Œã«ã‚‚ã‹ã‹ã‚ã‚‰ãš","wrongChoices":["ã—ãŸãŒã£ã¦","ãªãœãªã‚‰","ã‚‚ã—"]},{"id":80,"word":"paradigm","meaning":"ç¯„ä¾‹","wrongChoices":["ä¾‹å¤–","é€¸è„±","ç„¡ç§©åº"]},{"id":81,"word":"prevalent","meaning":"æµè¡Œã—ã¦ã„ã‚‹","wrongChoices":["ç¨€ã—ã„","å¤ã„","æ¶ˆæ»…ã—ãŸ"]},{"id":82,"word":"profound","meaning":"æ·±é ãª","wrongChoices":["æµ…ã„","è¡¨é¢çš„ãª","äº›ç´°ãª"]},{"id":83,"word":"subsequent","meaning":"ãã®å¾Œã®","wrongChoices":["ä»¥å‰ã®","åŒæ™‚ã®","åˆæœŸã®"]},{"id":84,"word":"substantial","meaning":"ç›¸å½“ãª","wrongChoices":["äº›ç´°ãª","ä¸ååˆ†ãª","æœ€å°é™ã®"]},{"id":85,"word":"sophisticated","meaning":"æ´—ç·´ã•ã‚ŒãŸ","wrongChoices":["å˜ç´”ãª","ç²—é‡ãª","æœªç™ºé”ã®"]},{"id":86,"word":"reinforce","meaning":"å¼·åŒ–ã™ã‚‹","wrongChoices":["å¼±ã‚ã‚‹","ç ´å£Šã™ã‚‹","ç„¡è¦–ã™ã‚‹"]},{"id":87,"word":"reluctant","meaning":"æ°—ãŒé€²ã¾ãªã„","wrongChoices":["ç†±å¿ƒãª","ç©æ¥µçš„ãª","å–œã‚“ã§ã„ã‚‹"]},{"id":88,"word":"resilient","meaning":"å›å¾©åŠ›ã®ã‚ã‚‹","wrongChoices":["è„†å¼±ãª","å£Šã‚Œã‚„ã™ã„","å¼±ã„"]},{"id":89,"word":"substantial","meaning":"ã‹ãªã‚Šã®","wrongChoices":["ã‚ãšã‹ãª","ä¸ååˆ†ãª","ç„¡è¦–ã§ãã‚‹"]},{"id":90,"word":"versatile","meaning":"å¤šæ‰ãª","wrongChoices":["å°‚é–€çš„ãª","é™å®šçš„ãª","å˜ä¸€ã®"]}]};

const mbtiQuestions=[{id:1,char:'ğŸŒ™',name:'INFPé­”æ³•ä½¿ã„',bubble:'ã­ãˆã­ãˆã€å‹é”ã¨éŠã‚“ã ã‚ã¨ã£ã¦ã©ã‚“ãªæ°—åˆ†?',question:'å‹é”ã¨éŠã‚“ã ã‚ã¨...',a:{text:'æ¥½ã—ãã¦å…ƒæ°—ã„ã£ã±ã„!ã‚‚ã£ã¨éŠã³ãŸã„',axis:'E'},b:{text:'æ¥½ã—ã‹ã£ãŸã‘ã©ã€å°‘ã—ç–²ã‚ŒãŸã‹ã‚‚',axis:'I'}},{id:2,char:'âš”ï¸',name:'ENTJé¨å£«',bubble:'åˆå¯¾é¢ã®äººã¨è©±ã™ã®ã¯å¾—æ„ã‹?',question:'åˆã‚ã¦ã®äººã¨è©±ã™ã¨...',a:{text:'ã™ãã«æ‰“ã¡è§£ã‘ã‚‰ã‚Œã‚‹',axis:'E'},b:{text:'å°‘ã—æ™‚é–“ãŒã‹ã‹ã‚‹',axis:'I'}},{id:3,char:'ğŸŒ¸',name:'ISFJå¦–ç²¾',bubble:'å¤§å‹¢ã§ãƒ¯ã‚¤ãƒ¯ã‚¤ã¨ã€å°‘äººæ•°ã§ã‚†ã£ãã‚Šã€ã©ã£ã¡ãŒå¥½ã?',question:'éã”ã—æ–¹ã¨ã—ã¦å¥½ããªã®ã¯...',a:{text:'å¤§å‹¢ã§ãƒ¯ã‚¤ãƒ¯ã‚¤ç››ã‚Šä¸ŠãŒã‚‹',axis:'E'},b:{text:'å°‘äººæ•°ã§ã‚†ã£ãã‚Šè©±ã™',axis:'I'}},{id:4,char:'âš¡',name:'ENTPç²¾éœŠ',bubble:'ä¸€äººã®æ™‚é–“ã€ã©ã‚Œãã‚‰ã„å¿…è¦?',question:'ä¸€äººã®æ™‚é–“ã¯...',a:{text:'ã‚ã¾ã‚Šå¿…è¦ãªã„ã€äººã¨ã„ã‚‹æ–¹ãŒå¥½ã',axis:'E'},b:{text:'ã¨ã¦ã‚‚å¤§åˆ‡ã€å……é›»ã§ãã‚‹',axis:'I'}},{id:5,char:'ğŸŒ™',name:'INFPé­”æ³•ä½¿ã„',bubble:'æœ¬ã‚’èª­ã‚€ã¨ãã€ã©ã‚“ãªã‚¸ãƒ£ãƒ³ãƒ«ãŒå¥½ã?',question:'èª­æ›¸ã™ã‚‹ãªã‚‰...',a:{text:'ãƒ•ã‚¡ãƒ³ã‚¿ã‚¸ãƒ¼ã€SFã€å¯èƒ½æ€§ã‚’æ„Ÿã˜ã‚‹è©±',axis:'N'},b:{text:'å®Ÿç”¨æ›¸ã€äº‹å®Ÿã«åŸºã¥ã„ãŸè©±',axis:'S'}},{id:6,char:'âš”ï¸',name:'ENTJé¨å£«',bubble:'æ–°ã—ã„ã“ã¨ã‚’å­¦ã¶ã¨ãã€ä½•ã‚’çŸ¥ã‚ŠãŸã„?',question:'å­¦ç¿’ã™ã‚‹ã¨ãé‡è¦–ã™ã‚‹ã®ã¯...',a:{text:'å…¨ä½“åƒã‚„å°†æ¥ã®å¯èƒ½æ€§',axis:'N'},b:{text:'å…·ä½“çš„ãªæ‰‹é †ã‚„äº‹å®Ÿ',axis:'S'}},{id:7,char:'ğŸŒ¸',name:'ISFJå¦–ç²¾',bubble:'è©±ã‚’ã™ã‚‹ã¨ãã€ã©ã‚“ãªé¢¨ã«ä¼ãˆã‚‹?',question:'èª°ã‹ã«è©±ã‚’ã™ã‚‹ã¨...',a:{text:'æŠ½è±¡çš„ãªè¡¨ç¾ã‚„æ¯”å–©ã‚’ä½¿ã†',axis:'N'},b:{text:'å…·ä½“çš„ãªä¾‹ã‚„äº‹å®Ÿã‚’ä½¿ã†',axis:'S'}},{id:8,char:'âš¡',name:'ENTPç²¾éœŠ',bubble:'ç¾å®Ÿã¨æƒ³åƒã€ã©ã£ã¡ã«æ™‚é–“ã‚’ä½¿ã†?',question:'è€ƒãˆäº‹ã‚’ã™ã‚‹ã¨...',a:{text:'æœªæ¥ã‚„å¯èƒ½æ€§ã«ã¤ã„ã¦è€ƒãˆã‚‹',axis:'N'},b:{text:'ä»Šã“ã“ã«ã‚ã‚‹ç¾å®Ÿã‚’è€ƒãˆã‚‹',axis:'S'}},{id:9,char:'ğŸŒ™',name:'INFPé­”æ³•ä½¿ã„',bubble:'å‹é”ãŒæ‚©ã‚“ã§ãŸã‚‰ã€ã©ã†ã™ã‚‹?',question:'å‹é”ãŒå›°ã£ã¦ã„ãŸã‚‰...',a:{text:'ã¾ãšæ°—æŒã¡ã«å¯„ã‚Šæ·»ã£ã¦è©±ã‚’èã',axis:'F'},b:{text:'è§£æ±ºç­–ã‚„ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã‚’è€ƒãˆã‚‹',axis:'T'}},{id:10,char:'âš”ï¸',name:'ENTJé¨å£«',bubble:'æ±ºæ–­ã™ã‚‹ã¨ãã€ä½•ã‚’é‡è¦–ã™ã‚‹?',question:'å¤§åˆ‡ãªé¸æŠã‚’ã™ã‚‹ã¨...',a:{text:'è«–ç†çš„ã«æ­£ã—ã„ã‹ã©ã†ã‹',axis:'T'},b:{text:'äººã®æ°—æŒã¡ã‚„å½±éŸ¿',axis:'F'}},{id:11,char:'ğŸŒ¸',name:'ISFJå¦–ç²¾',bubble:'æ„è¦‹ãŒå¯¾ç«‹ã—ãŸã‚‰ã€ã©ã†æ„Ÿã˜ã‚‹?',question:'è­°è«–ã‚„å¯¾ç«‹ãŒèµ·ãã‚‹ã¨...',a:{text:'ã‚¹ãƒˆãƒ¬ã‚¹ã€ã§ãã‚Œã°é¿ã‘ãŸã„',axis:'F'},b:{text:'åˆºæ¿€çš„ã€é¢ç™½ã„ã¨æ„Ÿã˜ã‚‹',axis:'T'}},{id:12,char:'âš¡',name:'ENTPç²¾éœŠ',bubble:'è¤’ã‚ã‚‰ã‚Œã‚‹ãªã‚‰ã€ä½•ã¦è¨€ã‚ã‚ŒãŸã„?',question:'è¤’ã‚ã‚‰ã‚Œã‚‹ã¨ã—ãŸã‚‰...',a:{text:'ã€Œå„ªã—ã„ã­ã€ã€ã€Œæ€ã„ã‚„ã‚ŠãŒã‚ã‚‹ã­ã€',axis:'F'},b:{text:'ã€Œé ­ã„ã„ã­ã€ã€ã€Œè«–ç†çš„ã ã­ã€',axis:'T'}},{id:13,char:'ğŸŒ™',name:'INFPé­”æ³•ä½¿ã„',bubble:'é€±æœ«ã®äºˆå®šã€ã©ã†ã‚„ã£ã¦æ±ºã‚ã‚‹?',question:'ä¼‘æ—¥ã®éã”ã—æ–¹ã¯...',a:{text:'ãã®æ™‚ã®æ°—åˆ†ã§è‡ªç”±ã«æ±ºã‚ã‚‹',axis:'P'},b:{text:'äº‹å‰ã«è¨ˆç”»ã‚’ç«‹ã¦ã¦ãŠã',axis:'J'}},{id:14,char:'âš”ï¸',name:'ENTJé¨å£«',bubble:'ç· ã‚åˆ‡ã‚ŠãŒã‚ã‚‹èª²é¡Œã€ã„ã¤ã‚„ã‚‹?',question:'ã‚„ã‚‹ã¹ãã“ã¨ãŒã‚ã‚‹ã¨...',a:{text:'æ—©ã‚ã«çµ‚ã‚ã‚‰ã›ã¦å®‰å¿ƒã—ãŸã„',axis:'J'},b:{text:'ç· ã‚åˆ‡ã‚Šç›´å‰ã«ã‚„ã‚‹æ–¹ãŒé›†ä¸­ã§ãã‚‹',axis:'P'}},{id:15,char:'ğŸŒ¸',name:'ISFJå¦–ç²¾',bubble:'éƒ¨å±‹ã®çŠ¶æ…‹ã€ã©ã‚“ãªæ„Ÿã˜?',question:'ã‚ãªãŸã®éƒ¨å±‹ã¯...',a:{text:'ãã¡ã‚“ã¨æ•´ç†æ•´é “ã•ã‚Œã¦ã„ã‚‹',axis:'J'},b:{text:'è‡ªç”±ãªæ„Ÿã˜ã€å‰µé€ çš„ãªæ•£ã‚‰ã‹ã‚Šæ–¹',axis:'P'}},{id:16,char:'âš¡',name:'ENTPç²¾éœŠ',bubble:'äºˆå®šãŒå¤‰ã‚ã£ãŸã‚‰ã€ã©ã†æ€ã†?',question:'æ€¥ãªäºˆå®šå¤‰æ›´ãŒã‚ã‚‹ã¨...',a:{text:'æŸ”è»Ÿã«å¯¾å¿œã€ã‚€ã—ã‚æ¥½ã—ã„',axis:'P'},b:{text:'ã‚¹ãƒˆãƒ¬ã‚¹ã€è¨ˆç”»é€šã‚ŠãŒã„ã„',axis:'J'}}];

const typeInfo={'INFP':{char:'ğŸŒ™',name:'INFP - å¤¢è¦‹ã‚‹é­”æ³•ä½¿ã„',desc:'ã‚ãªãŸã¯æƒ³åƒåŠ›è±Šã‹ã§å„ªã—ã„å¿ƒã®æŒã¡ä¸»ã€‚è¨€è‘‰ã®ä¸–ç•Œã§è‡ªç”±ã«å†’é™ºã—ã¾ã—ã‚‡ã†!'},'ENFP':{char:'ğŸŒ™',name:'ENFP - å¤¢è¦‹ã‚‹é­”æ³•ä½¿ã„',desc:'ã‚ãªãŸã¯æƒ³åƒåŠ›è±Šã‹ã§å„ªã—ã„å¿ƒã®æŒã¡ä¸»ã€‚è¨€è‘‰ã®ä¸–ç•Œã§è‡ªç”±ã«å†’é™ºã—ã¾ã—ã‚‡ã†!'},'INFJ':{char:'ğŸŒ™',name:'INFJ - å¤¢è¦‹ã‚‹é­”æ³•ä½¿ã„',desc:'ã‚ãªãŸã¯æƒ³åƒåŠ›è±Šã‹ã§å„ªã—ã„å¿ƒã®æŒã¡ä¸»ã€‚è¨€è‘‰ã®ä¸–ç•Œã§è‡ªç”±ã«å†’é™ºã—ã¾ã—ã‚‡ã†!'},'ISFP':{char:'ğŸŒ™',name:'ISFP - å¤¢è¦‹ã‚‹é­”æ³•ä½¿ã„',desc:'ã‚ãªãŸã¯æƒ³åƒåŠ›è±Šã‹ã§å„ªã—ã„å¿ƒã®æŒã¡ä¸»ã€‚è¨€è‘‰ã®ä¸–ç•Œã§è‡ªç”±ã«å†’é™ºã—ã¾ã—ã‚‡ã†!'},'ENFJ':{char:'âš”ï¸',name:'ENFJ - å‹‡æ•¢ãªé¨å£«',desc:'ã‚ãªãŸã¯ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ã¨æ±ºæ–­åŠ›ã‚’æŒã¤å‹‡è€…ã€‚ç›®æ¨™ã«å‘ã‹ã£ã¦çªãé€²ã¿ã¾ã—ã‚‡ã†!'},'ENTJ':{char:'âš”ï¸',name:'ENTJ - å‹‡æ•¢ãªé¨å£«',desc:'ã‚ãªãŸã¯ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ã¨æ±ºæ–­åŠ›ã‚’æŒã¤å‹‡è€…ã€‚ç›®æ¨™ã«å‘ã‹ã£ã¦çªãé€²ã¿ã¾ã—ã‚‡ã†!'},'ESTJ':{char:'âš”ï¸',name:'ESTJ - å‹‡æ•¢ãªé¨å£«',desc:'ã‚ãªãŸã¯ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ã¨æ±ºæ–­åŠ›ã‚’æŒã¤å‹‡è€…ã€‚ç›®æ¨™ã«å‘ã‹ã£ã¦çªãé€²ã¿ã¾ã—ã‚‡ã†!'},'INTJ':{char:'âš”ï¸',name:'INTJ - å‹‡æ•¢ãªé¨å£«',desc:'ã‚ãªãŸã¯ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ã¨æ±ºæ–­åŠ›ã‚’æŒã¤å‹‡è€…ã€‚ç›®æ¨™ã«å‘ã‹ã£ã¦çªãé€²ã¿ã¾ã—ã‚‡ã†!'},'ISFJ':{char:'ğŸŒ¸',name:'ISFJ - ç™’ã—ã®å¦–ç²¾',desc:'ã‚ãªãŸã¯æ€ã„ã‚„ã‚Šã¨çŒ®èº«ã®å¿ƒã‚’æŒã¤å„ªã—ã„å­˜åœ¨ã€‚è¨€è‘‰ã§äººã‚’ç™’ã—ã¾ã—ã‚‡ã†!'},'ESFJ':{char:'ğŸŒ¸',name:'ESFJ - ç™’ã—ã®å¦–ç²¾',desc:'ã‚ãªãŸã¯æ€ã„ã‚„ã‚Šã¨çŒ®èº«ã®å¿ƒã‚’æŒã¤å„ªã—ã„å­˜åœ¨ã€‚è¨€è‘‰ã§äººã‚’ç™’ã—ã¾ã—ã‚‡ã†!'},'ISTJ':{char:'ğŸŒ¸',name:'ISTJ - ç™’ã—ã®å¦–ç²¾',desc:'ã‚ãªãŸã¯æ€ã„ã‚„ã‚Šã¨çŒ®èº«ã®å¿ƒã‚’æŒã¤å„ªã—ã„å­˜åœ¨ã€‚è¨€è‘‰ã§äººã‚’ç™’ã—ã¾ã—ã‚‡ã†!'},'ENTP':{char:'âš¡',name:'ENTP - ç™ºæ˜å®¶ã®ç²¾éœŠ',desc:'ã‚ãªãŸã¯å¥½å¥‡å¿ƒæ—ºç››ã§é©æ–°çš„ãªç™ºæ˜å®¶ã€‚æ–°ã—ã„è¨€è‘‰ã‚’ç”Ÿã¿å‡ºã—ã¾ã—ã‚‡ã†!'},'ESTP':{char:'âš¡',name:'ESTP - ç™ºæ˜å®¶ã®ç²¾éœŠ',desc:'ã‚ãªãŸã¯å¥½å¥‡å¿ƒæ—ºç››ã§é©æ–°çš„ãªç™ºæ˜å®¶ã€‚æ–°ã—ã„è¨€è‘‰ã‚’ç”Ÿã¿å‡ºã—ã¾ã—ã‚‡ã†!'},'INTP':{char:'âš¡',name:'INTP - ç™ºæ˜å®¶ã®ç²¾éœŠ',desc:'ã‚ãªãŸã¯å¥½å¥‡å¿ƒæ—ºç››ã§é©æ–°çš„ãªç™ºæ˜å®¶ã€‚æ–°ã—ã„è¨€è‘‰ã‚’ç”Ÿã¿å‡ºã—ã¾ã—ã‚‡ã†!'},'ESFP':{char:'âš¡',name:'ESFP - ç™ºæ˜å®¶ã®ç²¾éœŠ',desc:'ã‚ãªãŸã¯å¥½å¥‡å¿ƒæ—ºç››ã§é©æ–°çš„ãªç™ºæ˜å®¶ã€‚æ–°ã—ã„è¨€è‘‰ã‚’ç”Ÿã¿å‡ºã—ã¾ã—ã‚‡ã†!'},'ISTP':{char:'âš¡',name:'ISTP - ç™ºæ˜å®¶ã®ç²¾éœŠ',desc:'ã‚ãªãŸã¯å¥½å¥‡å¿ƒæ—ºç››ã§é©æ–°çš„ãªç™ºæ˜å®¶ã€‚æ–°ã—ã„è¨€è‘‰ã‚’ç”Ÿã¿å‡ºã—ã¾ã—ã‚‡ã†!'}};

let currentScreen='splashScreen',mbtiCurrentQ=0,mbtiAnswers={E:0,I:0,S:0,N:0,T:0,F:0,J:0,P:0},userMBTI='',userCharacter='',selectedLevel='',quizQuestions=[],currentQuizQ=0,correctCount=0,userData={mbti:'',character:'',level:1,exp:0,maxExp:100,selectedLevel:'',todayQuizCount:0,totalWords:0,consecutiveDays:1,stats:{dailyHistory:[],wordHistory:{},totalQuizzes:0,totalCorrect:0,totalQuestions:0,studyTime:0,lastStudyDate:''}};

function loadUserData(){const saved=localStorage.getItem('kotobaTamagoData');if(saved){userData=JSON.parse(saved);if(!userData.stats){userData.stats={dailyHistory:[],wordHistory:{},totalQuizzes:0,totalCorrect:0,totalQuestions:0,studyTime:0,lastStudyDate:''}}return true}return false}
function saveUserData(){localStorage.setItem('kotobaTamagoData',JSON.stringify(userData))}
function showScreen(screenId){document.getElementById(currentScreen).classList.remove('active');document.getElementById(screenId).classList.add('active');currentScreen=screenId}
function loadMBTIQuestion(){
    const q=mbtiQuestions[mbtiCurrentQ];
    document.getElementById('mbtiCurrentQ').textContent=mbtiCurrentQ+1;
    document.getElementById('mbtiCharAvatar').textContent=q.char;
    document.getElementById('mbtiBubble').textContent=q.bubble;
    document.getElementById('mbtiQuestion').textContent=q.question;
    
    const choicesDiv = document.getElementById('mbtiChoices');
    choicesDiv.innerHTML = '';
    
    const btnA = document.createElement('button');
    btnA.className = 'choice-button';
    btnA.innerHTML = `<span style="font-weight:bold;color:#9B7ED9;">A.</span> ${q.a.text}`;
    btnA.addEventListener('click', () => answerMBTI(q.a.axis));
    
    const btnB = document.createElement('button');
    btnB.className = 'choice-button';
    btnB.innerHTML = `<span style="font-weight:bold;color:#9B7ED9;">B.</span> ${q.b.text}`;
    btnB.addEventListener('click', () => answerMBTI(q.b.axis));
    
    choicesDiv.appendChild(btnA);
    choicesDiv.appendChild(btnB);
}
function answerMBTI(axis){mbtiAnswers[axis]++;mbtiCurrentQ++;if(mbtiCurrentQ<mbtiQuestions.length){setTimeout(()=>loadMBTIQuestion(),300)}else{calculateMBTIResult()}}
function calculateMBTIResult(){
    userMBTI=(mbtiAnswers.E>mbtiAnswers.I?'E':'I')+(mbtiAnswers.S>mbtiAnswers.N?'S':'N')+(mbtiAnswers.T>mbtiAnswers.F?'T':'F')+(mbtiAnswers.J>mbtiAnswers.P?'J':'P');
    const info=typeInfo[userMBTI];
    userCharacter=info.char;
    userData.mbti=userMBTI;
    userData.character=userCharacter;
    document.getElementById('resultChar').textContent=info.char;
    document.getElementById('resultType').textContent=userMBTI;
    document.getElementById('resultName').textContent=info.name;
    document.getElementById('resultDesc').textContent=info.desc;
    
    setTimeout(() => {
        const continueBtn = document.getElementById('continueBtn');
        const newBtn = continueBtn.cloneNode(true);
        continueBtn.parentNode.replaceChild(newBtn, continueBtn);
        newBtn.addEventListener('click', goToLevelSelect);
    }, 100);
    
    showScreen('resultScreen');
}
function goToLevelSelect(){
    showScreen('levelSelectScreen');
    
    setTimeout(() => {
        document.getElementById('levelBeginner').addEventListener('click', () => selectLevel('åˆç´š'));
        document.getElementById('levelIntermediate').addEventListener('click', () => selectLevel('ä¸­ç´š'));
        document.getElementById('levelAdvanced').addEventListener('click', () => selectLevel('ä¸Šç´š'));
    }, 100);
}

function selectLevel(level){
    selectedLevel=level;
    userData.selectedLevel=level;
    saveUserData();
    updateHomeScreen();
    showScreen('homeScreen');
    
    setTimeout(() => {
        const charDisplay = document.getElementById('homeCharacter');
        const newCharDisplay = charDisplay.cloneNode(true);
        charDisplay.parentNode.replaceChild(newCharDisplay, charDisplay);
        newCharDisplay.addEventListener('click', characterTap);
        
        const quizBtn = document.getElementById('quizStartBtn');
        const newQuizBtn = quizBtn.cloneNode(true);
        quizBtn.parentNode.replaceChild(newQuizBtn, quizBtn);
        newQuizBtn.addEventListener('click', startQuiz);
    }, 100);
}
function updateHomeScreen(){
    const info=typeInfo[userData.mbti];
    document.getElementById('homeCharName').textContent=info.name;
    document.getElementById('homeLevel').textContent='Lv.'+userData.level;
    document.getElementById('homeCharacter').textContent=userData.character;
    document.getElementById('homeExp').textContent=userData.exp;
    document.getElementById('homeMaxExp').textContent=userData.maxExp;
    document.getElementById('homeExpBar').style.width=(userData.exp/userData.maxExp*100)+'%';
    document.getElementById('todayCount').textContent=userData.todayQuizCount;
    document.getElementById('consecutiveDays').textContent=userData.consecutiveDays;
    document.getElementById('totalWords').textContent=userData.totalWords;
    
    setTimeout(() => {
        const charDisplay = document.getElementById('homeCharacter');
        const newCharDisplay = charDisplay.cloneNode(true);
        charDisplay.parentNode.replaceChild(newCharDisplay, charDisplay);
        newCharDisplay.addEventListener('click', characterTap);
        
        const quizBtn = document.getElementById('quizStartBtn');
        const newQuizBtn = quizBtn.cloneNode(true);
        quizBtn.parentNode.replaceChild(newQuizBtn, quizBtn);
        newQuizBtn.addEventListener('click', startQuiz);
    }, 100);
}
function characterTap(){const char=document.getElementById('homeCharacter');char.textContent='ğŸŒŸğŸ˜Š';setTimeout(()=>{char.textContent=userData.character},500)}
function startQuiz(){if(userData.todayQuizCount>=10){alert('ä»Šæ—¥ã®ã‚¯ã‚¤ã‚ºã¯çµ‚äº†ã—ã¾ã—ãŸ!\næ˜æ—¥ã¾ãŸæŒ‘æˆ¦ã—ã¦ãã ã•ã„ã€‚');return}const levelWords=wordsData[userData.selectedLevel];const shuffled=[...levelWords].sort(()=>Math.random()-0.5);quizQuestions=shuffled.slice(0,10);currentQuizQ=0;correctCount=0;document.getElementById('quizChar').textContent=userData.character;loadQuizQuestion();showScreen('quizScreen')}
function loadQuizQuestion(){
    const q=quizQuestions[currentQuizQ];
    document.getElementById('quizNum').textContent=currentQuizQ+1;
    document.getElementById('quizWord').textContent=q.word;
    document.getElementById('cheerMsg').textContent='é ‘å¼µã£ã¦!';
    
    const choices=[q.meaning,...q.wrongChoices].sort(()=>Math.random()-0.5);
    const choicesDiv = document.getElementById('quizChoices');
    choicesDiv.innerHTML = '';
    
    choices.forEach(choice => {
        const btn = document.createElement('button');
        btn.className = 'choice-button';
        btn.textContent = choice;
        btn.addEventListener('click', () => answerQuiz(choice, q.meaning));
        choicesDiv.appendChild(btn);
    });
}
function answerQuiz(selected,correct){
    const isCorrect=selected===correct;
    const word = quizQuestions[currentQuizQ].word;
    
    if(!userData.stats.wordHistory[word]) {
        userData.stats.wordHistory[word] = {correct: 0, total: 0};
    }
    userData.stats.wordHistory[word].total++;
    if(isCorrect) {
        userData.stats.wordHistory[word].correct++;
        correctCount++;
        document.getElementById('cheerMsg').textContent='ã™ã”ã„!';
    } else {
        document.getElementById('cheerMsg').textContent='æ¬¡é ‘å¼µã‚ã†!';
    }
    
    const buttons=document.querySelectorAll('#quizChoices .choice-button');
    buttons.forEach(btn=>{
        if(btn.textContent===correct){btn.classList.add('correct')}
        else if(btn.textContent===selected&&!isCorrect){btn.classList.add('wrong')}
        btn.disabled=true
    });
    
    setTimeout(()=>{
        currentQuizQ++;
        if(currentQuizQ<quizQuestions.length){loadQuizQuestion()}
        else{showQuizResult()}
    },1500);
}
function showQuizResult(){
    const earnedExp=correctCount*10;
    userData.exp+=earnedExp;
    userData.todayQuizCount++;
    userData.totalWords+=correctCount;
    
    userData.stats.totalQuizzes++;
    userData.stats.totalCorrect += correctCount;
    userData.stats.totalQuestions += quizQuestions.length;
    userData.stats.studyTime += 3;
    
    const today = new Date().toISOString().split('T')[0];
    if(!userData.stats.dailyHistory.includes(today)) {
        userData.stats.dailyHistory.push(today);
    }
    userData.stats.lastStudyDate = today;
    
    updateConsecutiveDays();
    
    let leveledUp = false;
    
    while(userData.exp>=userData.maxExp){
        userData.exp-=userData.maxExp;
        userData.level++;
        userData.maxExp=Math.floor(userData.maxExp*1.5);
        leveledUp = true;
    }
    
    saveUserData();
    document.getElementById('quizResultChar').textContent=userData.character+'ğŸ˜Š';
    document.getElementById('finalScore').textContent=correctCount;
    document.getElementById('finalExpEarned').textContent=earnedExp;
    
    const backBtn = document.getElementById('backHomeBtn');
    const newBackBtn = backBtn.cloneNode(true);
    backBtn.parentNode.replaceChild(newBackBtn, backBtn);
    
    if(leveledUp) {
        newBackBtn.addEventListener('click', () => showLevelUpScreen(userData.level));
    } else {
        newBackBtn.addEventListener('click', backToHome);
    }
    
    showScreen('quizResultScreen');
}

function updateConsecutiveDays() {
    const today = new Date();
    const yesterday = new Date(today);
    yesterday.setDate(yesterday.getDate() - 1);
    
    const todayStr = today.toISOString().split('T')[0];
    const yesterdayStr = yesterday.toISOString().split('T')[0];
    
    if(userData.stats.dailyHistory.includes(yesterdayStr) || userData.stats.dailyHistory.includes(todayStr)) {
        if(userData.stats.lastStudyDate === yesterdayStr) {
            userData.consecutiveDays++;
        }
    } else {
        userData.consecutiveDays = 1;
    }
}

function showLevelUpScreen(newLevel) {
    document.getElementById('levelUpChar').textContent = userData.character;
    document.getElementById('newLevelNumber').textContent = newLevel;
    
    const messages = [
        'ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ï¼',
        'ã™ã”ã„ï¼ãƒ¬ãƒ™ãƒ«ã‚¢ãƒƒãƒ—ã§ã™ï¼',
        'ç´ æ™´ã‚‰ã—ã„æˆé•·ã§ã™ï¼',
        'æ¬¡ã®ã‚¹ãƒ†ãƒ¼ã‚¸ã¸ï¼'
    ];
    document.getElementById('levelUpMessage').textContent = messages[Math.floor(Math.random() * messages.length)];
    
    showScreen('levelUpScreen');
    
    setTimeout(() => {
        const continueBtn = document.getElementById('levelUpContinueBtn');
        const newBtn = continueBtn.cloneNode(true);
        continueBtn.parentNode.replaceChild(newBtn, continueBtn);
        newBtn.addEventListener('click', backToHome);
    }, 100);
}
function backToHome(){
    updateHomeScreen();
    showScreen('homeScreen');
    
    setTimeout(() => {
        const charDisplay = document.getElementById('homeCharacter');
        const newCharDisplay = charDisplay.cloneNode(true);
        charDisplay.parentNode.replaceChild(newCharDisplay, charDisplay);
        newCharDisplay.addEventListener('click', characterTap);
        
        const quizBtn = document.getElementById('quizStartBtn');
        const newQuizBtn = quizBtn.cloneNode(true);
        quizBtn.parentNode.replaceChild(newQuizBtn, quizBtn);
        newQuizBtn.addEventListener('click', startQuiz);
    }, 100);
}

function openSettings() {
    const info = typeInfo[userData.mbti];
    document.getElementById('settingsMBTI').textContent = `${userData.mbti} - ${info.name}`;
    document.getElementById('settingsLevel').textContent = userData.selectedLevel;
    document.getElementById('settingsCurrentLevel').textContent = `Lv.${userData.level}`;
    document.getElementById('settingsExp').textContent = `${userData.exp} / ${userData.maxExp}`;
    document.getElementById('settingsTotalWords').textContent = `${userData.totalWords}å€‹`;
    document.getElementById('settingsStreak').textContent = `ğŸ”¥ ${userData.consecutiveDays}æ—¥`;
    
    document.getElementById('settingsModal').classList.add('active');
}

function closeSettings() {
    document.getElementById('settingsModal').classList.remove('active');
}

document.addEventListener('click', function(e) {
    const modal = document.getElementById('settingsModal');
    if (e.target === modal) {
        closeSettings();
    }
    const statsModal = document.getElementById('statsModal');
    if (e.target === statsModal) {
        closeStats();
    }
});

function retakeMBTI() {
    if (confirm('MBTIè¨ºæ–­ã‚’ã‚„ã‚Šç›´ã—ã¾ã™ã‹?\nç¾åœ¨ã®ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã¨ã®æ€ã„å‡ºã¯æ®‹ã‚Šã¾ã™ãŒã€æ–°ã—ã„ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã«å¤‰ã‚ã‚Šã¾ã™ã€‚')) {
        mbtiCurrentQ = 0;
        mbtiAnswers = {E:0, I:0, S:0, N:0, T:0, F:0, J:0, P:0};
        closeSettings();
        loadMBTIQuestion();
        showScreen('mbtiScreen');
    }
}

function changeLevelDialog() {
    closeSettings();
    showScreen('levelSelectScreen');
}

function resetAllData() {
    if (confirm('æœ¬å½“ã«å…¨ã¦ã®ãƒ‡ãƒ¼ã‚¿ã‚’ãƒªã‚»ãƒƒãƒˆã—ã¾ã™ã‹?\nã“ã®æ“ä½œã¯å–ã‚Šæ¶ˆã›ã¾ã›ã‚“ã€‚')) {
        localStorage.removeItem('kotobaTamagoData');
        location.reload();
    }
}

function addDebugExp() {
    userData.exp += 100;
    while(userData.exp >= userData.maxExp) {
        userData.exp -= userData.maxExp;
        userData.level++;
        userData.maxExp = Math.floor(userData.maxExp * 1.5);
        showLevelUpScreen(userData.level);
    }
    saveUserData();
    openSettings();
    updateHomeScreen();
}

function addDebugLevel() {
    userData.level++;
    userData.exp = 0;
    userData.maxExp = Math.floor(userData.maxExp * 1.5);
    saveUserData();
    showLevelUpScreen(userData.level);
}

function openStats() {
    document.getElementById('statTotalQuizzes').textContent = userData.stats.totalQuizzes + 'å›';
    document.getElementById('statTotalCorrect').textContent = userData.stats.totalCorrect + 'å•';
    const accuracy = userData.stats.totalQuestions > 0 
        ? Math.round((userData.stats.totalCorrect / userData.stats.totalQuestions) * 100) 
        : 0;
    document.getElementById('statAccuracy').textContent = accuracy + '%';
    document.getElementById('statTotalWords').textContent = userData.totalWords + 'å€‹';
    
    const levelProgress = {
        'åˆç´š': 0,
        'ä¸­ç´š': 0,
        'ä¸Šç´š': 0
    };
    
    Object.keys(userData.stats.wordHistory).forEach(word => {
        const wordData = wordsData['åˆç´š'].find(w => w.word === word);
        if(wordData && userData.stats.wordHistory[word].correct > 0) levelProgress['åˆç´š']++;
        
        const wordData2 = wordsData['ä¸­ç´š'].find(w => w.word === word);
        if(wordData2 && userData.stats.wordHistory[word].correct > 0) levelProgress['ä¸­ç´š']++;
        
        const wordData3 = wordsData['ä¸Šç´š'].find(w => w.word === word);
        if(wordData3 && userData.stats.wordHistory[word].correct > 0) levelProgress['ä¸Šç´š']++;
    });
    
    document.getElementById('progressBeginnerText').textContent = `${levelProgress['åˆç´š']}/30`;
    document.getElementById('progressBeginner').style.width = `${(levelProgress['åˆç´š']/30)*100}%`;
    
    document.getElementById('progressIntermediateText').textContent = `${levelProgress['ä¸­ç´š']}/30`;
    document.getElementById('progressIntermediate').style.width = `${(levelProgress['ä¸­ç´š']/30)*100}%`;
    
    document.getElementById('progressAdvancedText').textContent = `${levelProgress['ä¸Šç´š']}/30`;
    document.getElementById('progressAdvanced').style.width = `${(levelProgress['ä¸Šç´š']/30)*100}%`;
    
    document.getElementById('streakDays').textContent = userData.consecutiveDays;
    
    renderCalendar();
    
    document.getElementById('studyTimeDisplay').textContent = userData.stats.studyTime;
    
    renderWordAnalysis();
    
    document.getElementById('statsModal').classList.add('active');
}

function closeStats() {
    document.getElementById('statsModal').classList.remove('active');
}

function renderCalendar() {
    const grid = document.getElementById('calendarGrid');
    grid.innerHTML = '';
    
    const today = new Date();
    const studyDates = userData.stats.dailyHistory || [];
    
    for(let i = 27; i >= 0; i--) {
        const date = new Date(today);
        date.setDate(date.getDate() - i);
        const dateStr = date.toISOString().split('T')[0];
        
        const dayDiv = document.createElement('div');
        dayDiv.className = 'calendar-day';
        dayDiv.textContent = date.getDate();
        
        if(studyDates.includes(dateStr)) {
            dayDiv.classList.add('studied');
        }
        
        if(i === 0) {
            dayDiv.classList.add('today');
        }
        
        grid.appendChild(dayDiv);
    }
}

function renderWordAnalysis() {
    const wordHistory = userData.stats.wordHistory || {};
    const words = Object.keys(wordHistory);
    
    if(words.length === 0) {
        document.getElementById('goodWords').innerHTML = '<div style="text-align:center; color:#94a3b8; padding:20px;">ã¾ã ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“</div>';
        document.getElementById('badWords').innerHTML = '<div style="text-align:center; color:#94a3b8; padding:20px;">ã¾ã ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“</div>';
        return;
    }
    
    const wordStats = words.map(word => {
        const data = wordHistory[word];
        const accuracy = data.total > 0 ? (data.correct / data.total) * 100 : 0;
        return { word, accuracy, total: data.total };
    }).filter(w => w.total > 0);
    
    const goodWords = [...wordStats].sort((a, b) => b.accuracy - a.accuracy).slice(0, 3);
    const goodWordsHTML = goodWords.map(w => `
        <div class="word-item">
            <span class="word-name">${w.word}</span>
            <span class="word-accuracy good">${Math.round(w.accuracy)}%</span>
        </div>
    `).join('');
    document.getElementById('goodWords').innerHTML = goodWordsHTML || '<div style="text-align:center; color:#94a3b8; padding:20px;">ãƒ‡ãƒ¼ã‚¿ãªã—</div>';
    
    const badWords = [...wordStats].sort((a, b) => a.accuracy - b.accuracy).slice(0, 3);
    const badWordsHTML = badWords.map(w => `
        <div class="word-item">
            <span class="word-name">${w.word}</span>
            <span class="word-accuracy bad">${Math.round(w.accuracy)}%</span>
        </div>
    `).join('');
    document.getElementById('badWords').innerHTML = badWordsHTML || '<div style="text-align:center; color:#94a3b8; padding:20px;">ãƒ‡ãƒ¼ã‚¿ãªã—</div>';
}

function init(){
    const hasData=loadUserData();
    
    document.getElementById('levelBeginner').addEventListener('click', () => selectLevel('åˆç´š'));
    document.getElementById('levelIntermediate').addEventListener('click', () => selectLevel('ä¸­ç´š'));
    document.getElementById('levelAdvanced').addEventListener('click', () => selectLevel('ä¸Šç´š'));
    
    document.getElementById('closeSettings').addEventListener('click', closeSettings);
    document.getElementById('retakeMBTI').addEventListener('click', retakeMBTI);
    document.getElementById('changeLevel').addEventListener('click', changeLevelDialog);
    document.getElementById('resetData').addEventListener('click', resetAllData);
    document.getElementById('addExp100').addEventListener('click', addDebugExp);
    document.getElementById('addLevel1').addEventListener('click', addDebugLevel);
    
    document.getElementById('closeStats').addEventListener('click', closeStats);
    
    if(hasData&&userData.mbti){
        setTimeout(()=>{updateHomeScreen();showScreen('homeScreen')},3000)
    }else{
        setTimeout(()=>{loadMBTIQuestion();showScreen('mbtiScreen')},5000)
    }
}
init();
    </script>
</body>
</html>
```

---

## âš ï¸ æ³¨æ„äº‹é …

ã“ã®HTMLãƒ•ã‚¡ã‚¤ãƒ«ã¯**éå¸¸ã«é•·ã„ã§ã™**ï¼ˆç´„1000è¡Œä»¥ä¸Šï¼‰ã€‚GitHubã®Web UIã§ã¯ä»¥ä¸‹ã®ç‚¹ã«æ³¨æ„ã—ã¦ãã ã•ã„ï¼š

1. **è²¼ã‚Šä»˜ã‘æ™‚é–“**: æ•°ç§’ã‹ã‹ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™
2. **ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«**: å…¨ä½“ã‚’ç¢ºèªã™ã‚‹ã«ã¯å°‘ã—æ™‚é–“ãŒã‹ã‹ã‚Šã¾ã™
3. **ä¿å­˜æ™‚é–“**: ã‚³ãƒŸãƒƒãƒˆæ™‚ã«å°‘ã—å¾…ã¤å¿…è¦ãŒã‚ã‚Šã¾ã™

---

## âœ… ç°¡å˜ãªæ‰‹é †ã¾ã¨ã‚
```
1. ä¸Šè¨˜ã®HTMLã‚³ãƒ¼ãƒ‰ã‚’å…¨é¸æŠï¼ˆCtrl+Aï¼‰
2. ã‚³ãƒ”ãƒ¼ï¼ˆCtrl+Cï¼‰
3. GitHub â†’ ãƒªãƒã‚¸ãƒˆãƒª â†’ Add file â†’ Create new file
4. ãƒ•ã‚¡ã‚¤ãƒ«å: original-kotoba-full.html
5. è²¼ã‚Šä»˜ã‘ï¼ˆCtrl+Vï¼‰
6. Commit new file
7. å®Œäº†ï¼ğŸ‰
